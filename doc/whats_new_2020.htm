<html>
<script type='text/x-mathjax-config'>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath:  [ ['@(@','@)@'] ] ,
    displayMath: [ ['@[@','@]@'] ]
  }
});
</script>
<script type='text/javascript' src=
'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=default'
>
</script>
<head>
<title>Changes and Additions to Dismod_at During 2020</title>
<meta http-equiv='Content-Type' content='text/html' charset='utf-8'>
<meta name="description" id="description" content="Changes and Additions to Dismod_at During 2020">
<meta name="keywords" id="keywords" content=" changes additions to dismod_at during 2020 03-25 03-24 03-23 03-22 03-21 03-19 03-18 03-15 03-09 03-06 02-29 02-28 02-26 02-20 02-18 02-14 02-13 01-31 01-16 01-08 01-07 ">
<style type='text/css'>
body { color : black }
body { background-color : white }
A:link { color : blue }
A:visited { color : purple }
A:active { color : purple }
</style>
<script type='text/javascript' language='JavaScript' src='_whats_new_2020_htm.js'>
</script>
</head>
<body>
<table><tr>
<td>
<a href="https://bradbell.github.io/dismod_at" target="_top"><img border="0" src="_image.gif"></a>
</td>
<td>
<select onchange='choose_up0(this)'>
<option>Location-&gt;</option>
<option>dismod_at</option>
<option>release_notes</option>
<option>whats_new_2020</option>
</select>
</td>
<td>
<select onchange='choose_across0(this)'>
<option>Search-&gt;</option>
<option>contents</option>
<option>reference</option>
<option>index</option>
<option>search</option>
<option>external</option>
</select>
</td>
<td><a href="release_notes.htm" target="_top">Prev</a>
</td><td><a href="whats_new_2019.htm" target="_top">Next</a>
</td><td>
<script type='text/javascript' language='JavaScript' src='_childtable_dismod_at_htm.js'></script>
</td>
<td>
<script type='text/javascript' language='JavaScript' src='_childtable_release_notes_htm.js'></script>
</td>
<td>whats_new_2020</td>
<td>
<select onchange='choose_current0(this)'>
<option>Heading-&gt;</option>
<option>03-25</option>
<option>03-24</option>
<option>03-23</option>
<option>03-22</option>
<option>03-21</option>
<option>03-19</option>
<option>03-18</option>
<option>03-15</option>
<option>03-09</option>
<option>03-06</option>
<option>02-29</option>
<option>02-28</option>
<option>02-26</option>
<option>02-20</option>
<option>02-18</option>
<option>02-14</option>
<option>02-13</option>
<option>01-31</option>
<option>01-16</option>
<option>01-08</option>
<option>01-07</option>
</select>
</td>
</tr></table><br>
@(@\newcommand{\R}[1]{ {\rm #1} }
\newcommand{\B}[1]{ {\bf #1} }
\newcommand{\W}[1]{ \; #1 \; }@)@



<center><b><big><big>Changes and Additions to Dismod_at During 2020</big></big></b></center>
<br>
<b><big><a name="03-25" id="03-25">03-25</a></big></b>

<ol type="1"><li>
Advance to <code><font color="blue">cppad_mixed-20200325</font></code>.
This fixed assert in the debug version during
<a href="sample_command.htm#asymptotic" target="_top"><span style='white-space: nowrap'>asymptotic</span></a>
 sampling
when there are no random effects.
</li><li>

If during asymptotic sampling the Hessian of the fixed or random
effects object is not positive definite, print a warning and do not
create a sample table (instead of filling the sample table with nulls);
see <a href="sample_command.htm#Output Tables.No Sample Table" target="_top"><span style='white-space: nowrap'>no&nbsp;sample&nbsp;table</span></a>
.
This fixed a bug where the <a href="db2csv_command.htm" target="_top"><span style='white-space: nowrap'>db2csv_command</span></a>
 tried to average null values.
</li><li>

The sample command asymptotic method uses a normal distribution,
but the scaled fixed effects variables are normal in the scaled space; see
<a href="sample_command.htm#asymptotic.Fixed Effects Distribution" target="_top"><span style='white-space: nowrap'>fixed&nbsp;effects&nbsp;distribution</span></a>

</li><li>

Add a test of
<a href="user_hes_fixed_math.py.htm#Scaling Fixed Effects" target="_top"><span style='white-space: nowrap'>scaling&nbsp;fixed&nbsp;effects</span></a>

to the <code><font color="blue">hes_fixed_math.py</font></code> example.
</li><li>

Advance to <a href="dock_dismod_at.sh.htm#Building Images.Version" target="_top"><span style='white-space: nowrap'>version</span></a>
 20200325
of <code><font color="blue">dock_dismod_at.sh</font></code>.
This will require building a new
<a href="dock_dismod_at.sh.htm#Building Images.dismod_at.image" target="_top"><span style='white-space: nowrap'>dismod_at.image</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="03-24" id="03-24">03-24</a></big></b>

<ol type="1"><li>
The Hessian tables are now guaranteed to be in row major order; see
representation for the
<a href="hes_fixed_table.htm#Representation" target="_top"><span style='white-space: nowrap'>hes_fixed</span></a>
 and
<a href="hes_random_table.htm#Representation" target="_top"><span style='white-space: nowrap'>hes_random</span></a>
 tables.
</li><li>

The values in <a href="hes_fixed_table.htm" target="_top"><span style='white-space: nowrap'>hes_fixed_table</span></a>
 are now in scaled space; see
<a href="prior_table.htm#eta.Scaling Fixed Effects" target="_top"><span style='white-space: nowrap'>scaling&nbsp;fixed&nbsp;effects</span></a>
.
</li><li>

Create separate tables, in the data flow section, for the
<a href="data_flow.htm#Command Output Tables" target="_top"><span style='white-space: nowrap'>command&nbsp;output&nbsp;tables</span></a>
 and
<a href="data_flow.htm#Command Extra Input Tables" target="_top"><span style='white-space: nowrap'>command&nbsp;extra&nbsp;input&nbsp;tables</span></a>
.
</li><li>

Add the <a href="db2csv_command.htm#hes_fixed.csv" target="_top"><span style='white-space: nowrap'>hes_fixed.csv</span></a>
 and
<a href="db2csv_command.htm#hes_random.csv" target="_top"><span style='white-space: nowrap'>hes_random.csv</span></a>
 output files
to the db2csv command.
</li><li>

Check the <code><font color="blue">hes_random.csv</font></code> file at the end of the
<a href="user_hes_random.py.htm" target="_top"><span style='white-space: nowrap'>user_hes_random.py</span></a>
 example.
</li></ol>


<br>
<br>
<b><big><a name="03-23" id="03-23">03-23</a></big></b>

<ol type="1"><li>
Update to using version cppad_mixed-20200319.
This enables computation of the Hessian of the random effects objective.
</li><li>

Add the <a href="hes_random_table.htm" target="_top"><span style='white-space: nowrap'>hes_random_table</span></a>
 as an output during an
<a href="sample_command.htm#asymptotic" target="_top"><span style='white-space: nowrap'>asymptotic</span></a>
 sample command.
Add the <a href="user_hes_random.py.htm" target="_top"><span style='white-space: nowrap'>user_hes_random.py</span></a>
 example use of the hes_random table.
</li></ol>


<br>
<br>
<b><big><a name="03-22" id="03-22">03-22</a></big></b>

<ol type="1"><li>
Add the <a href="sample_command.htm#Output Tables.hes_fixed_table" target="_top"><span style='white-space: nowrap'>hes_fixed&nbsp;table</span></a>

as an extra output when computing asymptotic samples.
</li><li>

The <code><font color="blue">user_asymptotic_math.py</font></code> example
was renamed to <a href="user_hes_fixed_math.py.htm" target="_top"><span style='white-space: nowrap'>user_hes_fixed_math.py</span></a>
 because it checks
the <a href="hes_fixed_table.htm" target="_top"><span style='white-space: nowrap'>hes_fixed_table</span></a>
.
</li><li>

Add a connecting sentence about computation before the equations
for the derivatives of
<small>@(@
\hat{u}_i ( \theta )
@)@</small> and <small>@(@
g_i ( \theta )
@)@</small>.
</li><li>

The asymptotic sampling of the random effects was changed to use the
a fixed Hessian w.r.t the random effects for all the samples.
Trying to optimize the random effects given the simulated fixed effects,
without changing the data, often fails and does not make sense.
</li></ol>


<br>
<br>
<b><big><a name="03-21" id="03-21">03-21</a></big></b>
<br>
Add the <a href="user_hes_fixed_math.py.htm" target="_top"><span style='white-space: nowrap'>user_hes_fixed_math.py</span></a>
 example.

<br>
<br>
<b><big><a name="03-19" id="03-19">03-19</a></big></b>
<br>
Update to using version cppad_mixed-20200319.
This fixes some asserts during the
<a href="sample_command.htm#asymptotic" target="_top"><span style='white-space: nowrap'>asymptotic</span></a>
 sampling method
in the debug build.

<br>
<br>
<b><big><a name="03-18" id="03-18">03-18</a></big></b>

<ol type="1"><li>
Advance to <a href="dock_dismod_at.sh.htm#Building Images.Version" target="_top"><span style='white-space: nowrap'>version</span></a>
 20200318
of <code><font color="blue">dock_dismod_at.sh</font></code>.
This will require building a new
<a href="dock_dismod_at.sh.htm#Building Images.dismod_at.image" target="_top"><span style='white-space: nowrap'>dismod_at.image</span></a>
.
</li><li>

Add the <a href="sample_command.htm#simulate_index" target="_top"><span style='white-space: nowrap'>simulate_index</span></a>
 argument
to the asymptotic version of the sample command.
This fixed a bug where the asymptotic statistics for a fit using
simulated data was using
<a href="data_table.htm#meas_value" target="_top"><span style='white-space: nowrap'>meas_value</span></a>

when it should have been using
<a href="data_sim_table.htm#data_sim_value" target="_top"><span style='white-space: nowrap'>data_sim_value</span></a>
.
</li><li>

Fix a bug in the sampling of the random effect using the
<a href="sample_command.htm#asymptotic" target="_top"><span style='white-space: nowrap'>asymptotic</span></a>
 method.
</li><li>

The <a href="user_speed.py.htm" target="_top"><span style='white-space: nowrap'>user_speed.py</span></a>
 example was improved.
More documentation was added,
it has a realistic parent and child grids, and
it works with both quasi-Newton and Newton method,
and it includes an example / test of the asymptotic statistics.
</li></ol>


<br>
<br>
<b><big><a name="03-15" id="03-15">03-15</a></big></b>

<ol type="1"><li>
Advance to <a href="dock_dismod_at.sh.htm#Building Images.Version" target="_top"><span style='white-space: nowrap'>version</span></a>
 20200315
of <code><font color="blue">dock_dismod_at.sh</font></code>.
This will require building a new
<a href="dock_dismod_at.sh.htm#Building Images.dismod_at.image" target="_top"><span style='white-space: nowrap'>dismod_at.image</span></a>
.
</li><li>

The sample command
<a href="sample_command.htm#asymptotic" target="_top"><span style='white-space: nowrap'>asymptotic</span></a>
 method
was changed to ignore all the constraints except for
<a href="model_variables.htm" target="_top"><span style='white-space: nowrap'>model_variables</span></a>
 that have their upper and lower limits equal.
This should speed up the computation of the asymptotic statics.
It also provides a way to approximation the Hessian of the fixed effect
objective (as the inverse of the sample covariance).
Note that the simulated samples may be outside the bounds for the
corresponding variables;
see <a href="sample_command.htm#Bounds" target="_top"><span style='white-space: nowrap'>bounds</span></a>
.
Also note that the <a href="predict_command.htm" target="_top"><span style='white-space: nowrap'>predict_command</span></a>
 censors the samples
to be within their limits before computing its predictions.
</li><li>

Some minor corrections were made to the discussion of the
<a href="user_sample_asy.py.htm" target="_top"><span style='white-space: nowrap'>user_sample_asy.py</span></a>
 example; e.g.
<small>@(@
\iota_c
@)@</small> and <small>@(@
\iota_m
@)@</small> where changed to <small>@(@
\iota_n
@)@</small>.
In addition, the
<a href="user_sample_asy.py.htm#Problem Parameters" target="_top"><span style='white-space: nowrap'>problem&nbsp;parameters</span></a>

were include in the documentation.
</li></ol>


<br>
<br>
<b><big><a name="03-09" id="03-09">03-09</a></big></b>

<ol type="1"><li>
There was a bug in the smoothing when there was a
upper or lower bound in the prior for
<a href="smooth_grid_table.htm#dage_prior_id" target="_top"><span style='white-space: nowrap'>dage</span></a>
 or
<a href="smooth_grid_table.htm#dtime_prior_id" target="_top"><span style='white-space: nowrap'>dtime</span></a>
 prior
for a fixed effect that was scaled; see
<a href="prior_table.htm#eta.Scaling Fixed Effects" target="_top"><span style='white-space: nowrap'>scaling&nbsp;fixed&nbsp;effects</span></a>
.
This has been fixed.
</li><li>

Advance to <a href="dock_dismod_at.sh.htm#Building Images.Version" target="_top"><span style='white-space: nowrap'>version</span></a>
 20200309
of <code><font color="blue">dock_dismod_at.sh</font></code>.
This will require building a new
<a href="dock_dismod_at.sh.htm#Building Images.dismod_at.image" target="_top"><span style='white-space: nowrap'>dismod_at.image</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="03-06" id="03-06">03-06</a></big></b>
<br>
The <code><font color="blue">jump_at_age.py</font></code> example has been improved
to include more discussion and the flexibility to change its
<a href="user_jump_at_age.py.htm#Parameters" target="_top"><span style='white-space: nowrap'>parameters</span></a>
.

<br>
<br>
<b><big><a name="02-29" id="02-29">02-29</a></big></b>

<ol type="1"><li>
Add the <a href="user_residual.py.htm" target="_top"><span style='white-space: nowrap'>user_residual.py</span></a>
 example.
</li><li>

If the user specified the <a href="option_table.htm#parent_node_id" target="_top"><span style='white-space: nowrap'>parent_node_id</span></a>

in the option table, the corresponding parent node name is placed in the
<a href="db2csv_command.htm#option.csv" target="_top"><span style='white-space: nowrap'>option.csv</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="02-28" id="02-28">02-28</a></big></b>
<br>
Fix the formula for the age smoothing <a href="smooth_dage.htm#A^s" target="_top"><span style='white-space: nowrap'>A^s</span></a>
,
and the time smoothing <a href="smooth_dtime.htm#T^s" target="_top"><span style='white-space: nowrap'>T^s</span></a>
.
To be specific, the forward index comes before the current index; e.g.,
<small>@(@
D(v_{i,j}, v_{i+1,j} \ldots )
@)@</small> was replaced by
<small>@(@
D(v_{i+1,j}, v_{i,j} \ldots )
@)@</small>.

<br>
<br>
<b><big><a name="02-26" id="02-26">02-26</a></big></b>

<ol type="1"><li>
Add an <a href="wish_list.htm#Immunity" target="_top"><span style='white-space: nowrap'>immunity</span></a>
 wish list item.
</li><li>

Discuss the difference between the weighted residual in the log scaled
<a href="statistic.htm#Weighted Residual Function, R.Value" target="_top"><span style='white-space: nowrap'>value</span></a>

and the log scaled
<a href="statistic.htm#Weighted Residual Function, R.Difference" target="_top"><span style='white-space: nowrap'>difference</span></a>

cases.
</li><li>

Discuss the difference in the definition of the
<a href="statistic.htm#Log-Transformed Standard Deviation, sigma" target="_top"><span style='white-space: nowrap'>log-transformed&nbsp;standard&nbsp;deviation</span></a>

<small>@(@
\sigma
@)@</small> in the data versus prior cases.
</li></ol>



<br>
<br>
<b><big><a name="02-20" id="02-20">02-20</a></big></b>
<br>
Advance to <a href="dock_dismod_at.sh.htm#Building Images.Version" target="_top"><span style='white-space: nowrap'>version</span></a>
 20200218
of <code><font color="blue">dock_dismod_at.sh</font></code>.
This will require building a new
<a href="dock_dismod_at.sh.htm#Building Images.dismod_at.image" target="_top"><span style='white-space: nowrap'>dismod_at.image</span></a>
.


<br>
<br>
<b><big><a name="02-18" id="02-18">02-18</a></big></b>
<br>
The <code><font color="blue">dismod_at</font></code> program would crash if the

<code><i><font color="black"><span style='white-space: nowrap'>subgroup_id</span></font></i></code>
 in the
<a href="data_table.htm#subgroup_id" target="_top"><span style='white-space: nowrap'>data_table</span></a>
 or
<a href="avgint_table.htm#subgroup_id" target="_top"><span style='white-space: nowrap'>avgint_table</span></a>
 as null.
This has been fixed by detecting this case and printing an error message.


<br>
<br>
<b><big><a name="02-14" id="02-14">02-14</a></big></b>
<br>
The description of the <a href="data_table.htm#hold_out" target="_top"><span style='white-space: nowrap'>hold_out</span></a>
 data
has been improved.

<br>
<br>
<b><big><a name="02-13" id="02-13">02-13</a></big></b>

<ol type="1"><li>
The <a href="age_table.htm#age_id" target="_top"><span style='white-space: nowrap'>age_id</span></a>
 and <a href="time_table.htm#time_id" target="_top"><span style='white-space: nowrap'>time_id</span></a>

values in the <a href="smooth_grid_table.htm" target="_top"><span style='white-space: nowrap'>smooth_grid_table</span></a>
 and <a href="weight_grid_table.htm" target="_top"><span style='white-space: nowrap'>weight_grid_table</span></a>
 were
not being checked for validity.
This has been changed so that the user gets an informative error message
when they are outside the valid limits.
</li><li>

Advance to <a href="dock_dismod_at.sh.htm#Building Images.Version" target="_top"><span style='white-space: nowrap'>version</span></a>
 20200213
of <code><font color="blue">dock_dismod_at.sh</font></code>.
This will require building a new
<a href="dock_dismod_at.sh.htm#Building Images.dismod_at.image" target="_top"><span style='white-space: nowrap'>dismod_at.image</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="01-31" id="01-31">01-31</a></big></b>
<br>
A <a href="wish_list.htm#Simulating Priors" target="_top"><span style='white-space: nowrap'>simulating&nbsp;priors</span></a>
 entry
was added to the wish list.

<br>
<br>
<b><big><a name="01-16" id="01-16">01-16</a></big></b>
<br>
Add an optimizer
<a href="wish_list.htm#Warm Starting Optimizer" target="_top"><span style='white-space: nowrap'>warm&nbsp;start</span></a>

wish list item.

<br>
<br>
<b><big><a name="01-08" id="01-08">01-08</a></big></b>

<ol type="1"><li>
Add documentation for the arguments
<a href="dock_dismod_at.sh.htm#Run New Container.database" target="_top"><span style='white-space: nowrap'>database</span></a>
 and
<a href="dock_dismod_at.sh.htm#Run New Container.command" target="_top"><span style='white-space: nowrap'>command</span></a>
 under
running a new container.
</li><li>

Advance <a href="dock_dismod_at.sh.htm#Building Images.Version" target="_top"><span style='white-space: nowrap'>version</span></a>
 20200108
of <code><font color="blue">dock_dismod_at.sh</font></code>.
This will require building a new
<a href="dock_dismod_at.sh.htm#Building Images.dismod_at.image" target="_top"><span style='white-space: nowrap'>dismod_at.image</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="01-07" id="01-07">01-07</a></big></b>
<br>
Fix the following compile error when <code><font color="blue">NDEBUG</font></code> is not defined:

<code><font color="blue"><span style='white-space: nowrap'><br>
&nbsp;&nbsp;&nbsp;&nbsp;</span></font><i><font color="black"><span style='white-space: nowrap'>...</span></font></i><font color="blue"><span style='white-space: nowrap'>/devel/table/get_subgroup_table.cpp:128:31:&nbsp;error:<br>
&nbsp;&nbsp;&nbsp;&nbsp;'subgroup_id'&nbsp;was&nbsp;not&nbsp;declared&nbsp;in&nbsp;this&nbsp;scope<br>
</span></font></code>

<hr>Input File: omh/whats_new/2020.omh

</body>
</html>
