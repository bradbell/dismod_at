<html>
<script type='text/x-mathjax-config'>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath:  [ ['@(@','@)@'] ] ,
    displayMath: [ ['@[@','@]@'] ]
  }
});
</script>
<script type='text/javascript' src=
'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=default'
>
</script>
<head>
<title>Changes and Additions to Dismod_at During 2018</title>
<meta http-equiv='Content-Type' content='text/html' charset='utf-8'>
<meta name="description" id="description" content="Changes and Additions to Dismod_at During 2018">
<meta name="keywords" id="keywords" content=" changes additions to dismod_at during 2018 04-13 04-12 04-11 04-10 04-09 04-08 04-07 04-06 03-21 03-13 03-10 03-08 03-06 02-20 02-17 02-14 02-13 02-12 02-11 02-09 02-08 02-05 02-04 02-03 02-02 02-01 01-31 01-30 01-28 01-26 01-25 01-24 01-23 01-22 01-21 01-20 01-18 01-16 01-12 01-09 ">
<style type='text/css'>
body { color : black }
body { background-color : white }
A:link { color : blue }
A:visited { color : purple }
A:active { color : purple }
</style>
<script type='text/javascript' language='JavaScript' src='_whats_new_2018_htm.js'>
</script>
</head>
<body>
<table><tr>
<td>
<a href="https://github.com/bradbell/dismod_at" target="_top"><img border="0" src="_image.gif"></a>
</td>
<td>
<select onchange='choose_up0(this)'>
<option>Location-&gt;</option>
<option>dismod_at</option>
<option>whats_new_2018</option>
</select>
</td>
<td>
<select onchange='choose_across0(this)'>
<option>Search-&gt;</option>
<option>contents</option>
<option>reference</option>
<option>index</option>
<option>search</option>
<option>external</option>
</select>
</td>
<td><a href="prior_depend.htm" target="_top">Prev</a>
</td><td>
<select onchange='choose_current0(this)'>
<option>Current-&gt;</option>
<option>Contents</option>
<option>04-13</option>
<option>04-12</option>
<option>04-11</option>
<option>04-10</option>
<option>04-09</option>
<option>04-08</option>
<option>04-07</option>
<option>04-06</option>
<option>03-21</option>
<option>03-13</option>
<option>03-10</option>
<option>03-08</option>
<option>03-06</option>
<option>02-20</option>
<option>02-17</option>
<option>02-14</option>
<option>02-13</option>
<option>02-12</option>
<option>02-11</option>
<option>02-09</option>
<option>02-08</option>
<option>02-05</option>
<option>02-04</option>
<option>02-03</option>
<option>02-02</option>
<option>02-01</option>
<option>01-31</option>
<option>01-30</option>
<option>01-28</option>
<option>01-26</option>
<option>01-25</option>
<option>01-24</option>
<option>01-23</option>
<option>01-22</option>
<option>01-21</option>
<option>01-20</option>
<option>01-18</option>
<option>01-16</option>
<option>01-12</option>
<option>01-09</option>
</select>
</td>
<td><a href="whats_new_2017.htm" target="_top">Next</a>
</td><td>
<select onchange='choose_down1(this)'>
<option>dismod_at-&gt;</option>
<option>install_unix</option>
<option>get_started</option>
<option>user</option>
<option>database</option>
<option>model</option>
<option>command</option>
<option>python</option>
<option>devel</option>
<option>whats_new_2018</option>
<option>wish_list</option>
</select>
</td>
<td>
<select onchange='choose_down0(this)'>
<option>whats_new_2018-&gt;</option>
<option>whats_new_2017</option>
<option>whats_new_2016</option>
<option>whats_new_2015</option>
</select>
</td>
</tr></table><br>
@(@\newcommand{\R}[1]{ {\rm #1} }
\newcommand{\B}[1]{ {\bf #1} }
\newcommand{\W}[1]{ \; #1 \; }@)@


<center><b><big><big>Changes and Additions to Dismod_at During 2018</big></big></b></center>
<br>
<b><big><a name="Contents" id="Contents">Contents</a></big></b>
<br>
<table>
<tr><td><a href="whats_new_2017.htm" target="_top">whats_new_2017</a></td><td>Changes&nbsp;and&nbsp;Additions&nbsp;to&nbsp;Dismod_at&nbsp;During&nbsp;2017</td></tr><tr><td><a href="whats_new_2016.htm" target="_top">whats_new_2016</a></td><td>Changes&nbsp;and&nbsp;Additions&nbsp;to&nbsp;Dismod_at&nbsp;During&nbsp;2016</td></tr><tr><td><a href="whats_new_2015.htm" target="_top">whats_new_2015</a></td><td>Changes&nbsp;and&nbsp;Additions&nbsp;to&nbsp;Dismod_at&nbsp;During&nbsp;2015</td></tr></table><br>
<b><big><a name="04-13" id="04-13">04-13</a></big></b>
<br>
Add some text to make it easier to follow
the final step in the <a href="posterior.htm#Lemma 2.Proof" target="_top"><span style='white-space: nowrap'>proof</span></a>

of Lemma 2 of the posterior distribution section.

<br>
<br>
<b><big><a name="04-12" id="04-12">04-12</a></big></b>

<ol type="1"><li>
There is a problem with using the sample command
<a href="sample_command.htm#method.simulate" target="_top"><span style='white-space: nowrap'>simulate</span></a>
 method.
The new <a href="posterior.htm" target="_top"><span style='white-space: nowrap'>posterior</span></a>
 model section discusses the problem.
</li><li>

The requirements for the
last age (last time) priors were changed so they do not need to be null;
see null under
<a href="smooth_grid_table.htm#dage_prior_id.null" target="_top"><span style='white-space: nowrap'>dage_prior_id</span></a>
 and
<a href="smooth_grid_table.htm#dtime_prior_id.null" target="_top"><span style='white-space: nowrap'>dtime_prior_id</span></a>
.
This made it possible to modify the example
<a href="user_change_grid.py.htm" target="_top"><span style='white-space: nowrap'>user_change_grid.py</span></a>
 so that it removes the
last age (instead of one in the middle of the grid)
without having to change any 
<code><i><font color="black"><span style='white-space: nowrap'>dage_prior_id</span></font></i></code>
 values.
There is a problem with using the sample command
<a href="sample_command.htm#method.simulate" target="_top"><span style='white-space: nowrap'>simulate</span></a>
 method.
The model section <a href="posterior.htm" target="_top"><span style='white-space: nowrap'>posterior</span></a>
 discusses the problem.
</li></ol>


<br>
<br>
<b><big><a name="04-11" id="04-11">04-11</a></big></b>
<br>
Instructions for
<a href="smooth_table.htm#Removing an Age or Time" target="_top"><span style='white-space: nowrap'>removing&nbsp;an&nbsp;age&nbsp;or&nbsp;time</span></a>

from a smoothing grid were added.
This is useful when one determines (through fitting) that there is
not enough data to determine a variable, or that a variable is nearly
linear in a region.

<br>
<br>
<b><big><a name="04-10" id="04-10">04-10</a></big></b>
<br>
The <code><font color="blue">fit_random.py</font></code> user example has been improved including a
<a href="user_fit_random.py.htm#Discussion" target="_top"><span style='white-space: nowrap'>discussion</span></a>
 of what is going on.

<br>
<br>
<b><big><a name="04-09" id="04-09">04-09</a></big></b>
<br>
There was a mistake in the
<a href="get_started_db.py.htm#Discussion" target="_top"><span style='white-space: nowrap'>discussion</span></a>
 of the
<code><font color="blue">get_started_db.py</font></code> example.
The adjusted other cause mortality for this example is
<small>@(@
\exp ( \alpha x ) \omega
@)@</small> not <small>@(@
\alpha x \omega
@)@</small>.
This has been fixed.


<br>
<br>
<b><big><a name="04-08" id="04-08">04-08</a></big></b>
<br>
Some uses have complained that it is hard to navigate the documentation.
The links at the top of every page have been changed in an attempt to
make this clearer.

<br>
<br>
<b><big><a name="04-07" id="04-07">04-07</a></big></b>

<ol type="1"><li>
Add
<a href="option_table.htm#Fixed Only.limited_memory_max_history_fixed" target="_top"><span style='white-space: nowrap'>limited_memory_max_history_fixed</span></a>

to the option table.
The default for this option was previously hard coded into the program
and could not be changed.
As it turns out, we seem to get better convergence with larger values for
this option when
<a href="option_table.htm#Fixed Only.quasi_fixed" target="_top"><span style='white-space: nowrap'>quasi_fixed</span></a>
 true.
</li><li>

The documentation for the optimizer options have been split up into
three groups:
<a href="option_table.htm#Fixed and Random" target="_top"><span style='white-space: nowrap'>fixed&nbsp;and&nbsp;random</span></a>
,
<a href="option_table.htm#Fixed Only" target="_top"><span style='white-space: nowrap'>fixed&nbsp;only</span></a>
, and
<a href="option_table.htm#Random Only" target="_top"><span style='white-space: nowrap'>random&nbsp;only</span></a>
.
</li></ol>



<br>
<br>
<b><big><a name="04-06" id="04-06">04-06</a></big></b>

<ol type="1"><li>
The <code><font color="blue">init</font></code> command documentation was improved to include a
list of the <a href="init_command.htm#Deleted Tables" target="_top"><span style='white-space: nowrap'>deleted&nbsp;tables</span></a>
.
</li><li>

The <a href="depend_var_table.htm" target="_top"><span style='white-space: nowrap'>depend_var_table</span></a>
 was added to the set of tables deleted by
the <code><font color="blue">init</font></code> command
because it must be the same length as the <a href="var_table.htm" target="_top"><span style='white-space: nowrap'>var_table</span></a>
 or the
<a href="db2csv_command.htm" target="_top"><span style='white-space: nowrap'>db2csv_command</span></a>
 will fail.
</li><li>

The db2csv command was improved so that it prints
an error message when the length of any of the variable tables is not
the same as the <a href="var_table.htm" target="_top"><span style='white-space: nowrap'>var_table</span></a>
.
</li><li>

Advance to <code><font color="blue">cppad_mixed-20180406</font></code>.
This allows for testing some new ideas, but does not yet have any effect on
<code><font color="blue">dismod_at</font></code>.
</li></ol>



<br>
<br>
<b><big><a name="03-21" id="03-21">03-21</a></big></b>
<br>
In the definition of
<a href="data_like.htm#Adjusted Standard Deviation, delta_i" target="_top"><span style='white-space: nowrap'>delta_i</span></a>
,
The text
<small>@(@
delta_i ( \theta )
@)@</small> was changed to <small>@(@
\delta_i ( \theta )
@)@</small>.

<br>
<br>
<b><big><a name="03-13" id="03-13">03-13</a></big></b>
<br>
The documentation of the restrictions on the priors for the
<a href="model_variables.htm#Random Effects, u" target="_top"><span style='white-space: nowrap'>random&nbsp;effects</span></a>
 has been improved.
See
<a href="rate_table.htm#Child Value Priors" target="_top"><span style='white-space: nowrap'>child&nbsp;value&nbsp;priors</span></a>
 and
<a href="rate_table.htm#Child Difference Priors" target="_top"><span style='white-space: nowrap'>child&nbsp;difference&nbsp;priors</span></a>
.
In addition, the error messages when these restrictions are violated
has also been improved.


<br>
<br>
<b><big><a name="03-10" id="03-10">03-10</a></big></b>
<br>
The install <a href="install_unix.htm#Download" target="_top"><span style='white-space: nowrap'>download</span></a>
 procedure was changed
to use the following command to determine the version number:
<code><font color='blue'><pre style='display:inline'> 
     grep '^SET(dismod_at_version' CMakeLists.txt
</pre></font></code>
<br>
<b><big><a name="03-08" id="03-08">03-08</a></big></b>
<br>
There was a mistake in the error message for wrong column
type detected in an <a href="input.htm" target="_top"><span style='white-space: nowrap'>input</span></a>
 table.
To be specific, a syntax error would occur on the line
<code><font color='blue'><pre style='display:inline'> 
      msg  = 'expected type ' + ty ++  ' for column ' + name
</pre></font></code>
This was fixed by changing <code><font color="blue">++</font></code> to <code><font color="blue">+</font></code>.

<br>
<br>
<b><big><a name="03-06" id="03-06">03-06</a></big></b>

<ol type="1"><li>
Some users were using the
type names <code><font color="blue">INTEGER</font></code>, <code><font color="blue">REAL</font></code>, and <code><font color="blue">TEXT</font></code>.
The database specifications have been extended to allow for these
<a href="database.htm#Type Names" target="_top"><span style='white-space: nowrap'>type&nbsp;names</span></a>
, and the necessary changes were made.
</li><li>

The error messaging when <a href="db2csv_command.htm" target="_top"><span style='white-space: nowrap'>db2csv_command</span></a>
 detected an invalid
<a href="database.htm#Primary Key" target="_top"><span style='white-space: nowrap'>primary&nbsp;key</span></a>
 has been improved.
</li><li>

Change <a href="db2csv_command.htm" target="_top"><span style='white-space: nowrap'>db2csv_command</span></a>
 so it checks the type of all the columns
in the <a href="input.htm" target="_top"><span style='white-space: nowrap'>input</span></a>
 tables.
</li></ol>


<br>
<br>
<b><big><a name="02-20" id="02-20">02-20</a></big></b>
<br>
Advance to <code><font color="blue">cppad_mixed-20180220</font></code>.
This fixes a problem, for some compilers, where some friend functions in
<code><font color="blue">cppad_mixed.hpp</font></code> were not defined.

<br>
<br>
<b><big><a name="02-17" id="02-17">02-17</a></big></b>
<br>
Change the <a href="user_diabetes.py.htm" target="_top"><span style='white-space: nowrap'>user_diabetes.py</span></a>
 example so that it constrains the
child omega rates to vary with age and time using the
<a href="user_diabetes.py.htm#Problem Parameters.parent_age_grid" target="_top"><span style='white-space: nowrap'>parent_age_grid</span></a>

and 
<code><i><font color="black"><span style='white-space: nowrap'>parent_time_grid</span></font></i></code>
.

<br>
<br>
<b><big><a name="02-14" id="02-14">02-14</a></big></b>

<ol type="1"><li>
Add
<a href="user_diabetes.py.htm#Problem Parameters.child_age_grid" target="_top"><span style='white-space: nowrap'>child_age_grid</span></a>

and
<a href="user_diabetes.py.htm#Problem Parameters.child_time_grid" target="_top"><span style='white-space: nowrap'>child_time_grid</span></a>

to the diabetes example problem parameters.
</li><li>

Improve documentation of
<a href="rate_table.htm#child_nslist_id" target="_top"><span style='white-space: nowrap'>child_nslist_id</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="02-13" id="02-13">02-13</a></big></b>
<br>
The changes below are for <a href="user_diabetes.py.htm" target="_top"><span style='white-space: nowrap'>user_diabetes.py</span></a>
:
<ol type="1"><li>
Add
<a href="user_diabetes.py.htm#Problem Parameters.random_seed" target="_top"><span style='white-space: nowrap'>random_seed</span></a>

and
<a href="user_diabetes.py.htm#Problem Parameters.tolerance_fixed" target="_top"><span style='white-space: nowrap'>tolerance_fixed</span></a>

to the problem parameters.
</li><li>

Change
<a href="user_diabetes.py.htm#Problem Parameters.fit_with_noise_in_data" target="_top"><span style='white-space: nowrap'>fit_with_noise_in_data</span></a>

to be false, so less data can result in tests passing; i.e,
makes automated testing faster.
</li><li>

Change max_abs_rel_err to
<a href="user_diabetes.py.htm#Problem Parameters.accept_rel_err" target="_top"><span style='white-space: nowrap'>accept_rel_err</span></a>
.
</li><li>

Change
<a href="user_diabetes.py.htm#Problem Parameters.ode_step_size" target="_top"><span style='white-space: nowrap'>ode_step_size</span></a>

to be larger to make the automated testing run faster.
</li></ol>


<br>
<br>
<b><big><a name="02-12" id="02-12">02-12</a></big></b>
<br>
The changes below are for <a href="user_diabetes.py.htm" target="_top"><span style='white-space: nowrap'>user_diabetes.py</span></a>
:
<ol type="1"><li>
Add two child nodes (random effects) to the
<a href="user_diabetes.py.htm#Problem Parameters.node_list" target="_top"><span style='white-space: nowrap'>node_list</span></a>
.
</li><li>

Changes so the example with random effects runs faster:
Increase the
<a href="option_table.htm#Fixed and Random.tolerance" target="_top"><span style='white-space: nowrap'>tolerance_fixed</span></a>
.
Reduce the number of points in the
<a href="user_diabetes.py.htm#Problem Parameters.parent_age_grid" target="_top"><span style='white-space: nowrap'>age</span></a>
 and
<a href="user_diabetes.py.htm#Problem Parameters.parent_time_grid" target="_top"><span style='white-space: nowrap'>time</span></a>
 grids.
</li><li>

Set the <a href="scale_var_table.htm" target="_top"><span style='white-space: nowrap'>scale_var_table</span></a>
 equal to the <a href="start_var_table.htm" target="_top"><span style='white-space: nowrap'>start_var_table</span></a>
.
This avoids nans during evaluation of the objective with random effects.
</li><li>

Optimize first with no random effects and then use that as a starting
point for optimizing with random effects.
</li><li>

Fix a list by changing it from time_index_rate_parent to time_index_rate_child.
</li><li>

Change number of time grid points in random effects from two to one
(random effects are constant for this example).
</li></ol>


<br>
<br>
<b><big><a name="02-11" id="02-11">02-11</a></big></b>

<ol type="1"><li>
Advance to <code><font color="blue">cppad_mixed-20180208</font></code>
(no change from user's perspective).
</li><li>

Change <code><font color="blue">db2csv_command</font></code> so that it displays 
<code><i><font color="black"><span style='white-space: nowrap'>eta_v</span></font></i></code>

when ever it affects the fixed effects
<a href="prior_table.htm#eta.Scaling Fixed Effects" target="_top"><span style='white-space: nowrap'>scaling</span></a>
; see
<a href="db2csv_command.htm#variable.csv.prior_info" target="_top"><span style='white-space: nowrap'>prior_info</span></a>
.
</li></ol>

The changes below are for <a href="user_diabetes.py.htm" target="_top"><span style='white-space: nowrap'>user_diabetes.py</span></a>
:
<ol type="1"><li>
Remove two priors that are no longer being used.
</li><li>

Change the priors for the rates so use log
<a href="prior_table.htm#eta.Scaling Fixed Effects" target="_top"><span style='white-space: nowrap'>scaling</span></a>

during the optimization process.
</li><li>

Add
<a href="user_diabetes.py.htm#Problem Parameters.derivative_test_fixed" target="_top"><span style='white-space: nowrap'>derivative_test_fixed</span></a>
, and
<a href="user_diabetes.py.htm#Problem Parameters.mulcov_dict" target="_top"><span style='white-space: nowrap'>mulcov_dict</span></a>

to the set of problem parameters.
</li><li>

Increase the number of points in the age and time grids.
</li><li>

Correct documentation for covariate
<a href="user_diabetes.py.htm#Covariates.Multipliers" target="_top"><span style='white-space: nowrap'>multipliers</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="02-09" id="02-09">02-09</a></big></b>

<ol type="1"><li>
Detect and report an error when a data table
<a href="data_table.htm#density_id" target="_top"><span style='white-space: nowrap'>density</span></a>
 is <code><font color="blue">log_students</font></code> and
<a href="data_table.htm#eta" target="_top"><span style='white-space: nowrap'>eta</span></a>
 is less than zero or null.
</li><li>

Update the values used for 
<code><i><font color="black"><span style='white-space: nowrap'>option_name</span></font></i></code>
 in the
<a href="option_table.py.htm" target="_top"><span style='white-space: nowrap'>option_table.py</span></a>
 example.
</li></ol>


<br>
<br>
<b><big><a name="02-08" id="02-08">02-08</a></big></b>

<ol type="1"><li>
Add <a href="set_command.htm#source.start_var" target="_top"><span style='white-space: nowrap'>start_var</span></a>
 to the possible
sources for the <code><font color="blue">set</font></code> command.
</li><li>

Advance to <code><font color="blue">cppad_mixed-20180208</font></code>.
This fixes a bug in the Laplace
<a href="data_table.htm#density_id" target="_top"><span style='white-space: nowrap'>density</span></a>
 in the data table when
<a href="option_table.htm#Fixed Only.quasi_fixed" target="_top"><span style='white-space: nowrap'>quasi_fixed</span></a>
 was <code><font color="blue">false</font></code>.
</li><li>

Detect and report an error when the density in the data table is
<a href="data_table.htm#density_id.Laplace" target="_top"><span style='white-space: nowrap'>laplace</span></a>
 or <code><font color="blue">log_laplace</font></code>.
</li></ol>



<br>
<br>
<b><big><a name="02-05" id="02-05">02-05</a></big></b>
<br>
Advance to <code><font color="blue">cppad_mixed-20180205</font></code>.
This is expected to improve the scaling of the fixed effect optimization
(in some cases).

<br>
<br>
<b><big><a name="02-04" id="02-04">02-04</a></big></b>
<br>
The variable.csv <a href="db2csv_command.htm#variable.csv.start" target="_top"><span style='white-space: nowrap'>start</span></a>
 column
was only correct when
<a href="db2csv_command.htm#variable.csv.var_type" target="_top"><span style='white-space: nowrap'>var_type</span></a>
 was <code><font color="blue">rate</font></code>.
This has been fixed.
The changes below are for <a href="user_diabetes.py.htm" target="_top"><span style='white-space: nowrap'>user_diabetes.py</span></a>
:
<ol type="1"><li>
Add
<a href="user_diabetes.py.htm#Problem Parameters.truth2start" target="_top"><span style='white-space: nowrap'>truth2start</span></a>
,
<a href="user_diabetes.py.htm#Problem Parameters.accept_rel_err" target="_top"><span style='white-space: nowrap'>accept_rel_err</span></a>
,
to the problem parameters.
</li><li>

Add fitting of multipliers for the following covariates:
market scan 2000 on
<a href="mulcov_table.htm#mulcov_type.meas_value" target="_top"><span style='white-space: nowrap'>meas_value</span></a>
,
body mass index and sex on the
<a href="mulcov_table.htm#mulcov_type.rate_value" target="_top"><span style='white-space: nowrap'>rate_value</span></a>
 for iota.
</li></ol>


<br>
<br>
<b><big><a name="02-03" id="02-03">02-03</a></big></b>
<br>
The age and time limits in the
<a href="db2csv_command.htm#data.csv" target="_top"><span style='white-space: nowrap'>data.csv</span></a>
 file were rounded off
(as are most of its other columns)
to reduce the space used when viewing the columns in a spread sheet program.
<code><span style='white-space: nowrap'><br>
<br>
</span></code>The changes below are for <a href="user_diabetes.py.htm" target="_top"><span style='white-space: nowrap'>user_diabetes.py</span></a>
:
<ol type="1"><li>
Make the standard deviations in the parent rate differences
<a href="user_diabetes.py.htm#Problem Parameters" target="_top"><span style='white-space: nowrap'>problem&nbsp;parameters</span></a>
.
</li><li>

Change <a href="user_diabetes.py.htm#Problem Parameters.node_list" target="_top"><span style='white-space: nowrap'>node_list</span></a>

example to only the parent node.
</li><li>

Add
<a href="user_diabetes.py.htm#Problem Parameters.integrand_list" target="_top"><span style='white-space: nowrap'>integrand_list</span></a>
,
<a href="user_diabetes.py.htm#Problem Parameters.ode_step_size" target="_top"><span style='white-space: nowrap'>ode_step_size</span></a>
,
<a href="user_diabetes.py.htm#Problem Parameters.meas_repeat" target="_top"><span style='white-space: nowrap'>meas_repeat</span></a>
,
<a href="user_diabetes.py.htm#Problem Parameters.quasi_fixed" target="_top"><span style='white-space: nowrap'>quasi_fixed</span></a>
,
to the problem parameters.
</li></ol>


<br>
<br>
<b><big><a name="02-02" id="02-02">02-02</a></big></b>
<br>
All these changes are to <a href="user_diabetes.py.htm" target="_top"><span style='white-space: nowrap'>user_diabetes.py</span></a>

which is still under construction.
<ol type="1"><li>
Added age and time variation to omega and chi.
</li><li>

Increased number of optimizer iterations because
there is feed back from the initial iota to prevalence at all ages.
</li><li>

Increase number of age grid points to 9
so ages are closer to being integer valued.
</li><li>

The <a href="user_diabetes.py.htm#Problem Parameters" target="_top"><span style='white-space: nowrap'>problem&nbsp;parameters</span></a>

were moved into the documentation section of the this example.
</li></ol>


<br>
<br>
<b><big><a name="02-01" id="02-01">02-01</a></big></b>
<br>
Added time variation to <a href="rate_table.htm#rate_name.iota" target="_top"><span style='white-space: nowrap'>iota</span></a>
 in the
<a href="user_diabetes.py.htm" target="_top"><span style='white-space: nowrap'>user_diabetes.py</span></a>
 example.
This example is still under construction, but it has some interesting
techniques for simulating data and testing models.

<br>
<br>
<b><big><a name="01-31" id="01-31">01-31</a></big></b>

<ol type="1"><li>
The <a href="db2csv_command.htm#variable.csv.start" target="_top"><span style='white-space: nowrap'>start</span></a>
 column
was added to the <code><font color="blue">variable.csv</font></code> file created by the
<a href="db2csv_command.htm" target="_top"><span style='white-space: nowrap'>db2csv_command</span></a>
.
</li><li>

The <a href="db2csv_command.py.htm" target="_top"><span style='white-space: nowrap'>db2csv_command.py</span></a>
 example was improved
to better demonstrate (and test) which field in
<a href="db2csv_command.htm#variable.csv" target="_top"><span style='white-space: nowrap'>variable.csv</span></a>

are empty
</li></ol>


<br>
<br>
<b><big><a name="01-30" id="01-30">01-30</a></big></b>
<br>
Improve the documentation for the
<a href="create_database.htm#smooth_table" target="_top"><span style='white-space: nowrap'>smooth_table</span></a>
 argument to the
<code><font color="blue">create_database</font></code> python function.

<br>
<br>
<b><big><a name="01-28" id="01-28">01-28</a></big></b>

<ol type="1"><li>
Add mention that
<a href="predict_table.htm#sample_index" target="_top"><span style='white-space: nowrap'>sample_index</span></a>
 is always zero when the
source for the predict command is
<a href="predict_command.htm#source.fit_var" target="_top"><span style='white-space: nowrap'>fit_var</span></a>
 or
<a href="predict_command.htm#source.truth_var" target="_top"><span style='white-space: nowrap'>truth_var</span></a>
.
</li><li>

Mention that under normal circumstances,
<a href="option_table.htm#Fixed and Random.derivative_test" target="_top"><span style='white-space: nowrap'>derivative_test</span></a>

should be <code><font color="blue">none</font></code>.
</li></ol>


<br>
<br>
<b><big><a name="01-26" id="01-26">01-26</a></big></b>

<ol type="1"><li>
A special discussion of the prior mean,
in the case where the density is
<a href="prior_table.htm#mean.uniform" target="_top"><span style='white-space: nowrap'>uniform</span></a>
,
was added.
</li><li>

Improve error message when number of unique ages (times)
<a href="smooth_grid_table.htm" target="_top"><span style='white-space: nowrap'>smooth_grid_table</span></a>
 does not agree with
the corresponding <a href="smooth_table.htm#n_age" target="_top"><span style='white-space: nowrap'>n_age</span></a>

( <a href="smooth_table.htm#n_time" target="_top"><span style='white-space: nowrap'>n_time</span></a>
 ) in smooth table.
</li><li>

The definition of the
<a href="data_like.htm#Adjusted Standard Deviation, delta_i" target="_top"><span style='white-space: nowrap'>adjusted&nbsp;standard&nbsp;deviation</span></a>

for the log transformed densities was changed so that the standard deviation
effect multiplies
<a href="data_like.htm#Data Table Notation.Delta_i" target="_top"><span style='white-space: nowrap'>Delta_i</span></a>
.
</li><li>

There was a bug in how <a href="db2csv_command.htm" target="_top"><span style='white-space: nowrap'>db2csv_command</span></a>
 determined the reference value
for covariates in the <a href="avgint_table.htm" target="_top"><span style='white-space: nowrap'>avgint_table</span></a>
.
This has been fixed.
</li></ol>


<br>
<br>
<b><big><a name="01-25" id="01-25">01-25</a></big></b>
<br>
Add mention that the <a href="simulate_command.htm#meas_value" target="_top"><span style='white-space: nowrap'>meas_value</span></a>

is not used during the simulate command.

<br>
<br>
<b><big><a name="01-24" id="01-24">01-24</a></big></b>
<br>
Change the specification for the
<a href="create_database.htm#smooth_table" target="_top"><span style='white-space: nowrap'>smooth_table</span></a>
 function

<code><font color="blue"><span style='white-space: nowrap'><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span></font><i><font color="black"><span style='white-space: nowrap'>v</span></font></i><font color="blue"><span style='white-space: nowrap'>,&nbsp;</span></font><i><font color="black"><span style='white-space: nowrap'>da</span></font></i><font color="blue"><span style='white-space: nowrap'>,&nbsp;</span></font><i><font color="black"><span style='white-space: nowrap'>dt</span></font></i><font color="blue"><span style='white-space: nowrap'>)&nbsp;=&nbsp;</span></font><i><font color="black"><span style='white-space: nowrap'>fun</span></font></i><font color="blue"><span style='white-space: nowrap'>(</span></font><i><font color="black"><span style='white-space: nowrap'>a</span></font></i><font color="blue"><span style='white-space: nowrap'>,&nbsp;</span></font><i><font color="black"><span style='white-space: nowrap'>t</span></font></i><font color="blue"><span style='white-space: nowrap'>)<br>
</span></font></code>
so that <code><font color="blue">None</font></code> can be returned for 
<code><i><font color="black"><span style='white-space: nowrap'>da</span></font></i></code>
 and 
<code><i><font color="black"><span style='white-space: nowrap'>dt</span></font></i></code>

when there is no such forward difference.
In addition, change the <a href="user.htm" target="_top"><span style='white-space: nowrap'>user</span></a>
 examples to use this feature.

<br>
<br>
<b><big><a name="01-23" id="01-23">01-23</a></big></b>

<ol type="1"><li>
Improve documentation of which data points require a separate solution of the
<a href="integrand_table.htm#integrand_name.ODE" target="_top"><span style='white-space: nowrap'>ODE</span></a>
.
In addition, we added a discussion of the
<a href="ode_grid.htm#Purpose" target="_top"><span style='white-space: nowrap'>purpose</span></a>
 of the ODE grid.
</li><li>

Advance to <code><font color="blue">cppad_mixed-20180123</font></code>.
This fixed a bug in <code><font color="blue">cppad_mixed-20180122</font></code>.
</li></ol>


<br>
<br>
<b><big><a name="01-22" id="01-22">01-22</a></big></b>

<ol type="1"><li>
Advance to <code><font color="blue">cppad_mixed-20180122</font></code>.
This only makes sure the new version works
and should not result in any change to <code><font color="blue">dismod-at</font></code>.
</li><li>

Improve the instructions for combining both
<a href="run_cmake.sh.htm#Debug and Release" target="_top"><span style='white-space: nowrap'>debug&nbsp;and&nbsp;release</span></a>

versions of dismod_at on the same system.
</li></ol>


<br>
<br>
<b><big><a name="01-21" id="01-21">01-21</a></big></b>

<ol type="1"><li>
Include discussion of the
<a href="statistic.htm#Weighted Residual Function, R" target="_top"><span style='white-space: nowrap'>weighted&nbsp;residual</span></a>

in the <a href="simulate_command.htm" target="_top"><span style='white-space: nowrap'>simulate_command</span></a>
 documentation.
</li><li>

Some other minor improvements and corrections were made
to the documentation.
</li><li>

The calculation of the
<a href="simulate_command.htm#simulate_table.simulate_value" target="_top"><span style='white-space: nowrap'>simulate_value</span></a>

was corrected to allow for negative values in
<a href="simulate_command.htm#y.Linear" target="_top"><span style='white-space: nowrap'>linear</span></a>
 cases.
(The mistake fixed here was made during the changes on
<a href="whats_new_2018.htm#01-20" target="_top"><span style='white-space: nowrap'>01-20</span></a>
; see below.)
</li><li>

Check for and abort with an error message when there is a <code><font color="blue">null</font></code>
value in the data table
<a href="data_table.htm#meas_value" target="_top"><span style='white-space: nowrap'>meas_value</span></a>
 column.
</li></ol>



<br>
<br>
<b><big><a name="01-20" id="01-20">01-20</a></big></b>

<ol type="1"><li>
The method used by the <a href="simulate_command.htm" target="_top"><span style='white-space: nowrap'>simulate_command</span></a>
 was simplified and documented.
To be specific, the average integrand, instead of the simulated
data value, was used to compute the transformed standard deviation
<a href="statistic.htm#Log-Transformed Standard Deviation, sigma" target="_top"><span style='white-space: nowrap'>sigma</span></a>
.
</li><li>

The fields 
<code><i><font color="black"><span style='white-space: nowrap'>meas_value</span></font></i></code>
 and 
<code><i><font color="black"><span style='white-space: nowrap'>meas_std</span></font></i></code>

in the simulate table were changed to
<a href="simulate_table.htm#simulate_value" target="_top"><span style='white-space: nowrap'>simulate_value</span></a>
 and
<a href="simulate_table.htm#simulate_delta" target="_top"><span style='white-space: nowrap'>simulate_delta</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="01-18" id="01-18">01-18</a></big></b>

<ol type="1"><li>
The flags <code><font color="blue">-Wpedantic</font></code>, <code><font color="blue">-Wshadow</font></code> and <code><font color="blue">-Wconversion</font></code>
were added to the default value of
<a href="run_cmake.sh.htm#extra_cxx_flags" target="_top"><span style='white-space: nowrap'>extra_cxx_flags</span></a>
.
In addition, fix the corresponding warning messages generated by gcc
during the
<a href="install_unix.htm#dismod_at" target="_top"><span style='white-space: nowrap'>dismod_at</span></a>
 part of the instal process.
</li><li>

Fix an un-used variable warning when
<a href="run_cmake.sh.htm#build_type" target="_top"><span style='white-space: nowrap'>build_type</span></a>
 is <code><font color="blue">release</font></code>.
</li><li>

Replace the default acceptable tolerance by the
<a href="option_table.htm#Fixed and Random.tolerance" target="_top"><span style='white-space: nowrap'>tolerances</span></a>

specified in the options table.
(The acceptable tolerance is used when the optimizer is having trouble
obtaining the desired tolerance.)
</li><li>

Advance to <code><font color="blue">cppad_mixed-20180117</font></code>. This fixes warnings
with the new compiler flags above.
</li></ol>


<br>
<br>
<b><big><a name="01-16" id="01-16">01-16</a></big></b>
<br>
The <code><font color="blue">data.csv</font></code> file did not include the
<a href="db2csv_command.htm#data.csv.sim_value" target="_top"><span style='white-space: nowrap'>sim_value</span></a>
 and

<code><i><font color="black"><span style='white-space: nowrap'>sim_std</span></font></i></code>
 columns when there was
no <a href="fit_command.htm#simulate_index" target="_top"><span style='white-space: nowrap'>simulate_index</span></a>

in the previous fit command.
If there is a <a href="simulate_table.htm" target="_top"><span style='white-space: nowrap'>simulate_table</span></a>
 the default value zero is used for

<code><i><font color="black"><span style='white-space: nowrap'>simulate_index</span></font></i></code>
 when it does not appear in the previous fit command.

<br>
<br>
<b><big><a name="01-12" id="01-12">01-12</a></big></b>
<br>
There was a bug in the change on 01-09. To be specific,
the case where a child had no
<a href="model_variables.htm#Random Effects, u" target="_top"><span style='white-space: nowrap'>random&nbsp;effects</span></a>
,
and the child had data with no rate covariates,
was not handled correctly. This has been fixed.

<br>
<br>
<b><big><a name="01-09" id="01-09">01-09</a></big></b>
<br>
A change was made to speed up the calculations for measurements
that have the reference value for all the rate covariates; see
<a href="mulcov_table.htm#mulcov_type.rate_value" target="_top"><span style='white-space: nowrap'>rate_value</span></a>
 in the mulcov table
documentation.



<hr>Input File: omh/whats_new/2018.omh

</body>
</html>
