.. _user_hold_out_2.py-name:

!!!!!!!!!!!!!!!!!!
user_hold_out_2.py
!!!!!!!!!!!!!!!!!!

xrst input file: ``example/user/hold_out_2.py``

.. meta::
   :keywords: user_hold_out_2.py, hold_out, command:, balancing, sex, covariate, values

.. index:: user_hold_out_2.py, hold_out, command:, balancing, sex, covariate, values

.. _user_hold_out_2.py-title:

hold_out Command: Balancing Sex Covariate Values
################################################

.. meta::
   :keywords: purpose

.. index:: purpose

.. _user_hold_out_2.py@Purpose:

Purpose
*******
This example shows how to balance
:ref:`hold_out_command@Balancing@Covariates`
using the hold_out command.

.. meta::
   :keywords: integrands

.. index:: integrands

.. _user_hold_out_2.py@Integrands:

Integrands
**********
For this example there is only one integrand, ``Sincidence`` .

.. meta::
   :keywords: nodes

.. index:: nodes

.. _user_hold_out_2.py@Nodes:

Nodes
*****
There are Three nodes, ``europe`` , ``germany`` and ``italy`` .

.. meta::
   :keywords: alpha_true

.. index:: alpha_true

.. _user_hold_out_2.py@alpha_true:

alpha_true
**********
True value of the covariate multiplier used to simulate data:

.. literalinclude:: ../../example/user/hold_out_2.py
   :lines: 30-30
   :language: py

This multiplies the sex covariate and affects *iota* .

.. meta::
   :keywords: iota_avg

.. index:: iota_avg

.. _user_hold_out_2.py@iota_avg:

iota_avg
********
Average value of *iota* .

.. literalinclude:: ../../example/user/hold_out_2.py
   :lines: 40-40
   :language: py

.. meta::
   :keywords: true, iota

.. index:: true, iota

.. _user_hold_out_2.py@True Iota:

True Iota
*********
True value for iota used to simulate the data:

.. literalinclude:: ../../example/user/hold_out_2.py
   :lines: 49-56
   :language: py

.. meta::
   :keywords: parent, node

.. index:: parent, node

.. _user_hold_out_2.py@Parent Node:

Parent Node
***********
For this example the parent node is europe and we are only fitting
fixed effects, so the variation between germany and italy is noise in
the model.

.. meta::
   :keywords: data

.. index:: data

.. _user_hold_out_2.py@Data:

Data
****
For each node, the data comes in pairs with both sexes represented equally.
The problem with the data is that we are only fitting fixed effects.
Thus the variation in the node for each data point is a confounding
covariate when we sub-sample without balancing the sex covariate.

.. meta::
   :keywords: model

.. index:: model

.. _user_hold_out_2.py@Model:

Model
*****
There is only one rate *iota* and it is constant as a function
of age and time. In addition, there is one covariate multiplier
for income.

.. meta::
   :keywords: fitting

.. index:: fitting

.. _user_hold_out_2.py@fitting:

fitting
*******
For this example we are only fitting the fixed effects,
so the variation between germany and italy is a confounding covariate.

.. meta::
   :keywords: hold_out

.. index:: hold_out

.. _user_hold_out_2.py@hold_out:

hold_out
********
This example uses the version of the hold_out command that includes
:ref:`balancing covariates<hold_out_command@Balancing@Covariates>` .
Note that balancing the sex covariate leads to much more accurate
estimates of the covariate multiplier *alpha* .

.. meta::
   :keywords: source, code

.. index:: source, code

.. _user_hold_out_2.py@Source Code:

Source Code
***********

.. literalinclude:: ../../example/user/hold_out_2.py
   :lines: 101-332
   :language: py
