.. _user_change_grid.py-name:

!!!!!!!!!!!!!!!!!!!
user_change_grid.py
!!!!!!!!!!!!!!!!!!!

xrst input file: ``example/user/change_grid.py``

.. meta::
   :keywords: user_change_grid.py, remove, an, age, or, time, from, a, smoothing

.. index:: user_change_grid.py, remove, an, age, or, time, from, a, smoothing

.. _user_change_grid.py-title:

Remove an Age or Time From a Smoothing
######################################

.. meta::
   :keywords: purpose

.. index:: purpose

.. _user_change_grid.py@Purpose:

Purpose
*******
This examples uses SQL commands to modify a data base.
To be specific, it removes one of the age points from a smoothing grid.

.. meta::
   :keywords: age, table

.. index:: age, table

.. _user_change_grid.py@Age Table:

Age Table
*********
The :ref:`age_table-name` for this example is specified by the code
::

    age_list = [0, 1, 20, 30, 40, 50, 60, 70, 80, 90, 100 ]

.. meta::
   :keywords: time, table

.. index:: time, table

.. _user_change_grid.py@Time Table:

Time Table
**********
The :ref:`time_table-name` is specified by
::

    time_list = [ 1960, 1995 ]

.. meta::
   :keywords: parent, smoothing

.. index:: parent, smoothing

.. _user_change_grid.py@Parent Smoothing:

Parent Smoothing
****************
The original parent smoothing table contains all of the age and time points.

.. meta::
   :keywords: value, prior

.. index:: value, prior

.. _user_change_grid.py@Parent Smoothing@Value Prior:

Value Prior
===========
The value prior at each (age, time) pair is log-Gaussian with
lower limit 1 ``e-2`` * *iota_mean* ,
upper limit 1 *e* +2* ``iota_mean`` ,
mean *iota mean* ,
standard deviation *iota_mean* ,
and the offset in the log transform 1 ``e-3`` * *iota_mean* .

.. meta::
   :keywords: difference, prior

.. index:: difference, prior

.. _user_change_grid.py@Parent Smoothing@Difference Prior:

Difference Prior
================
The forward difference prior at each (age, time) pair is log-Gaussian with
no lower limit,
no upper limit,
mean zero,
standard deviation 1.0 ,
and the offset in the log transform ``1e-6`` .

.. meta::
   :keywords: change, parent, smoothing

.. index:: change, parent, smoothing

.. _user_change_grid.py@Change Parent Smoothing:

Change Parent Smoothing
***********************
Note that the original age grid has 11 points.
The last age point, and all the corresponding (age, time) pairs
are removed from the smoothing grid with the following SQL commands:
::

    UPDATE smooth SET n_age = 10 WHERE smooth_id == 0;
    UPDATE smooth_grid SET smooth_id = WHERE smooth_id == 0 AND age_id == 10;

We refer to this as the modified smoothing.

.. meta::
   :keywords: fit

.. index:: fit

.. _user_change_grid.py@Fit:

Fit
***
The only variables in this example are the parent rates for *iota* .
Hence the number of variables in the :ref:`var_table-name` should be the number
of grid points in the modified smoothing; i.e., 20.
There is no data for this example.
Hence the optimal fit is to have *iota* equal to *iota_mean*
for all the (age, time) paris in the modified smoothing.

.. meta::
   :keywords: source, code

.. index:: source, code

.. _user_change_grid.py@Source Code:

Source Code
***********

.. literalinclude:: ../../example/user/change_grid.py
   :lines: 83-293
   :language: py
