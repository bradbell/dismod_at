.. _hold_out_command-name:

!!!!!!!!!!!!!!!!
hold_out_command
!!!!!!!!!!!!!!!!

xrst input file: ``devel/cmd/hold_out_command.cpp``

.. meta::
   :keywords: hold_out_command, hold, out, command:, randomly, sub-sample, the, data

.. index:: hold_out_command, hold, out, command:, randomly, sub-sample, the, data

.. _hold_out_command-title:

Hold Out Command: Randomly Sub-sample The Data
##############################################

.. meta::
   :keywords: syntax

.. index:: syntax

.. _hold_out_command@Syntax:

Syntax
******

   *dismod_at* ``database`` *hold_out* ``integrand_name`` ``max_fit``

``dismod_at`` *database* ``hold_out`` *integrand_name* *max_fit*
*cov_name* *cov_value_1* *cov_value_2*

.. meta::
   :keywords: purpose

.. index:: purpose

.. _hold_out_command@Purpose:

Purpose
*******
This command is used to set a maximum number of data values
that are included in subsequent fits.
It is intended to make the initialization and fitting faster.
The random sample of which values to include can be made repeatable using
:ref:`option_table@random_seed` .

.. meta::
   :keywords: database

.. index:: database

.. _hold_out_command@database:

database
********
Is an
http://www.sqlite.org/sqlite/ database containing the
``dismod_at`` :ref:`input-name` tables which are not modified.

.. meta::
   :keywords: integrand_name

.. index:: integrand_name

.. _hold_out_command@integrand_name:

integrand_name
**************
This is the
:ref:`integrand<integrand_table@integrand_name>` that we are sub-sampling.

.. meta::
   :keywords: max_fit

.. index:: max_fit

.. _hold_out_command@max_fit:

max_fit
*******
This is the maximum number of data points to fit for the specified integrand;
i.e., the maximum number that are not held out.
If for this integrand there are more than *mas_fit* points with
:ref:`data_table@hold_out` zero in the data table,
points are randomly held out so that there are *max_fit*
points fit for this integrand.

.. meta::
   :keywords: cov_name

.. index:: cov_name

.. _hold_out_command@cov_name:

cov_name
********
If this argument is present, it specifies a covariate column that
will be balanced; see covariate balancing below:

.. meta::
   :keywords: cov_value_1

.. index:: cov_value_1

.. _hold_out_command@cov_value_1:

cov_value_1
***********
If this argument is present, it specifies one of the covariate values
for the balancing. This is a string representation of a ``double`` value.

.. meta::
   :keywords: cov_value_2

.. index:: cov_value_2

.. _hold_out_command@cov_value_2:

cov_value_2
***********
If this argument is present, it specifies the opposite covariate value
for the balancing. This is a string representation of a ``double`` value.

.. meta::
   :keywords: balancing

.. index:: balancing

.. _hold_out_command@Balancing:

Balancing
*********

.. meta::
   :keywords: child, nodes

.. index:: child, nodes

.. _hold_out_command@Balancing@Child Nodes:

Child Nodes
===========
The choice of which points to include in the fit tries to sample the
same number of data points from each of the child nodes (and the parent node).
If there are not sufficiently many data for one of these nodes, the others
make up the difference.

.. meta::
   :keywords: covariates

.. index:: covariates

.. _hold_out_command@Balancing@Covariates:

Covariates
==========
If *cov_name* is present, any sample that has the
covariate value *cov_value_1* or *cov_value_2*
will be paired with a sample from the opposite value (if possible).

.. meta::
   :keywords: data_subset_table

.. index:: data_subset_table

.. _hold_out_command@data_subset_table:

data_subset_table
*****************
Only rows of the :ref:`data_subset_table-name` that correspond to this integrand
are modified.
The :ref:`data_subset_table@hold_out` is set one (zero)
if the corresponding data is (is not) selected for hold out.
Only points that have *hold_out* zero in the data table
can have hold_out non-zero in the data_subset table.
See the fit command :ref:`fit_command@hold_out`
documentation.

.. meta::
   :keywords: example

.. index:: example

.. _hold_out_command@Example:

Example
*******
The files :ref:`user_hold_out_1.py-name` and :ref:`user_hold_out_2.py-name`
contain examples and tests using this command.
