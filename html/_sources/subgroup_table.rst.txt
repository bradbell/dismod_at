.. _subgroup_table-name:

!!!!!!!!!!!!!!
subgroup_table
!!!!!!!!!!!!!!

xrst input file: ``xrst/table/subgroup_table.xrst``

.. meta::
   :keywords: subgroup_table, the, subgroup, table

.. index:: subgroup_table, the, subgroup, table

.. _subgroup_table-title:

The Subgroup Table
##################

.. meta::
   :keywords: purpose

.. index:: purpose

.. _subgroup_table@Purpose:

Purpose
*******
This table allows one to divide the data into groups and subgroups.
A group (subgroups within a group) correspond to the fixed effects
(random effects) created by one row in the covariate multiplier table
:ref:`mulcov_table-name` .

.. meta::
   :keywords: subgroup_id

.. index:: subgroup_id

.. _subgroup_table@subgroup_id:

subgroup_id
***********
This column has type ``integer`` and is the primary key for this table.
Its initial value is zero, and it increments by one for each row.

.. meta::
   :keywords: subgroup_name

.. index:: subgroup_name

.. _subgroup_table@subgroup_name:

subgroup_name
*************
This column has type ``text`` and has a different value for every row;
i.e., the names are unique and can act as substitutes for the primary key.
The names are intended to be easier for a human to remember than the ids.

.. meta::
   :keywords: group_id

.. index:: group_id

.. _subgroup_table@group_id:

group_id
********
This column has type ``integer`` .
Its value in its first row is zero (where *subgroup_id* is zero).
The value in each subsequent row is either the same as the previous row,
or one greater than the previous row.
The group corresponding to a group id is the union of all the subgroups
with the same group_id.

.. meta::
   :keywords: group_name

.. index:: group_name

.. _subgroup_table@group_name:

group_name
**********
This column has type ``text`` .
Rows that have the same (different) *group_id* must have the same
(different) *group_name* .
Spaces are not allowed the *group_name* because they are used by the
:ref:`option_table@Zero Sum Constraints@zero_sum_mulcov_group`
option to separate group names.
The *group_name* must be different for different *group_id*
values. In addition, it should note be equal to any *subgroup_name*
values, except in the special case where it is the only subgroup for the
group.

.. meta::
   :keywords: discussion

.. index:: discussion

.. _subgroup_table@Discussion:

Discussion
**********

.. meta::
   :keywords: spaces

.. index:: spaces

.. _subgroup_table@Discussion@Spaces:

Spaces
======
It would be possible to allow spaces in the *group_name*
if we add another option called *separator* that was the
character used to separate lists in the option table
(the default value for this option would be space).

.. meta::
   :keywords: order

.. index:: order

.. _subgroup_table@Discussion@Order:

Order
=====
The order of the rows in the subgroup table is set up so that *group_id*
is monotone non-decreasing. This requirement could be removed
(it just make the initial implementation of subgroups easier).

.. meta::
   :keywords: group, table

.. index:: group, table

.. _subgroup_table@Discussion@group Table:

group Table
===========
One might think it would be easier to have a separate group table
and not require *group_id* to be monotone and not have to include
*group_name* in this table. The problem with this is ``group``
is a keyword in SQL and hence it is hard to work with a table named group.

.. meta::
   :keywords: example

.. index:: example

.. _subgroup_table@Example:

Example
*******
2DO: create a file ``subgroup_table.py``
that contains an example subgroup table.
