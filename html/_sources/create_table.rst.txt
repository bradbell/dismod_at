.. _create_table-name:

!!!!!!!!!!!!
create_table
!!!!!!!!!!!!

xrst input file: ``python/dismod_at/create_table.py``

.. meta::
   :keywords: create_table, create, a, database, table

.. index:: create_table, create, a, database, table

.. _create_table-title:

Create a Database Table
#######################

.. meta::
   :keywords: syntax

.. index:: syntax

.. _create_table@Syntax:

Syntax
******

| ``dismod_at.create_table`` (
| |tab| *connection* , *tbl_name* , *col_name* , *col_type* , *row_list*
| )

.. meta::
   :keywords: connection

.. index:: connection

.. _create_table@connection:

connection
**********
is a :ref:`create_connection@connection` for this database.

.. meta::
   :keywords: tbl_name

.. index:: tbl_name

.. _create_table@tbl_name:

tbl_name
********
is a ``str`` that specifies the name of the table.

.. meta::
   :keywords: col_name

.. index:: col_name

.. _create_table@col_name:

col_name
********
is a ``list`` of ``str``
where the elements are the column names in the table that is created.
The column name for the primary key, *tbl_name* _ ``id`` must
not be included in the list.

.. meta::
   :keywords: unique

.. index:: unique

.. _create_table@col_name@unique:

unique
======
If the column name *tbl_name* _ ``name`` is in the list,
the corresponding column will have the ``unique`` constraint.

.. meta::
   :keywords: col_type

.. index:: col_type

.. _create_table@col_type:

col_type
********
is a ``list`` of ``str`` where the elements are the column types
in the same order as *col_name* .
The valid types are
``integer`` , ``real`` , ``text`` .

.. meta::
   :keywords: row_list

.. index:: row_list

.. _create_table@row_list:

row_list
********
is a possibly empty ``list`` of rows contain data that is written
to the table.
Each row is itself a list containing the data for one row of the
table in the same order as *col_name* .
Note that the primary key column is not included in *row_list* .
Also note that the value in each column gets converted to unicode
before being written to the database.
Note that the special value

    *row_list* [ *i* ][ *j* ] == ``None``

gets converted to ``null`` in the table.

.. meta::
   :keywords: tbl_name_id

.. index:: tbl_name_id

.. _create_table@tbl_name_id:

tbl_name_id
***********
A column with name *tbl_name* _ ``id`` and type
``integer primary key`` is included as the first column in the table.
Its values start with zero (for the first row) and
increment by one for each row.

.. meta::
   :keywords: side, effects

.. index:: side, effects

.. _create_table@Side Effects:

Side Effects
************
This routine does a

    *connection* . ``commit`` ()

to make sure the table exists before returning.

.. meta::
   :keywords: example

.. index:: example

.. _create_table@Example:

Example
*******
The file :ref:`create_table.py-name` is an example use of
``create_table`` .

.. toctree::
   :maxdepth: 1
   :hidden:

   create_table.py
